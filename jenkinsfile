pipeline {
    
    agent {
        label 'docker'
    }
    environment {
        test = "test"
    }
    
    options {
        disableConcurrentBuilds()
        skipStagesAfterUnstable()        
    }
    
    parameters {
        string(name:'repository', defaultValue: '${env.repository}', description: 'Git Repository')                    
    }
    
    stages {        
        stage('Checkout') {            
            steps {
               git '${repository}'
               script {
                    env.version = input id: 'Version', message: 'Which Version Do you want to Build', ok: 'Build',
                                      parameters: [ [$class: 'GitParameterDefinition',
                                                     branch: '',
                                                     branchFilter: '.*',
                                                     defaultValue: '',
                                                     description: 'Please Select Version',
                                                     name: 'Version',
                                                     quickFilterEnabled: false,
                                                     selectedValue: 'NONE',
                                                     sortMode: 'NONE',
                                                     tagFilter: '*',
                                                     type: 'Tag'
                                                     ]
                                                  ]
               }
        
                
                echo "step 1"                
            }
            post {
            success {
                echo "success"
                   }            
            failure {                    
                echo "failure"
            }
           }
        }      
}
    }
